import React, { useEffect, useState } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { Link, NavLink } from 'react-router-dom';
import { toast } from 'react-toastify';
import { checkIsAuth, logout } from '../redux/slice/auth/authSlice';
import maskimg from "../assets/img/Mask.png"

export const Navbar = () => {

  const [toggleTheme, setToggleTheme] = useState(localStorage.getItem("theme"))

  

  const isAuth = useSelector(checkIsAuth);
  const dispatch = useDispatch();
  const activeStyles = {
    color: 'black',
  };

  const logoutHandler = () => {
    dispatch(logout());
    window.localStorage.removeItem('token');
    toast('You logged out');
  };

  const toggleHTML = () => {
    
    if(toggleTheme){
      setToggleTheme("")
      localStorage.setItem("theme", "")
    }else{
      setToggleTheme("dark")
      localStorage.setItem("theme", "dark")
    }
    
  }


  useEffect(() => {
    const html = window.document.documentElement;
    if(toggleTheme){
      html.classList.add("dark")
    }else{
      html.classList.remove("dark")
    }

  }, [toggleTheme])

  return (
    <div className='flex h-20 items-center gap-x-5'>
       <div className="logo grow">
       <svg className='fill-[#000000]  justify-self-start dark:fill-[white]' width="169" height="25" viewBox="0 0 169 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                        d="M43.3048 9.2822L45.3564 6.75706C43.8192 5.15547 41.4556 4.1384 39.2018 4.1384C34.4746 4.1384 30.8801 7.56955 30.8801 12.123C30.8801 16.6998 34.4053 20.2011 39.0631 20.2011C41.34 20.2011 43.7267 19.0963 45.3737 17.3837L43.2991 15.104C42.1837 16.2322 40.6465 16.9511 39.2423 16.9511C36.5666 16.9511 34.492 14.8293 34.492 12.0762C34.492 9.32311 36.5666 7.22468 39.2423 7.22468C40.6928 7.22468 42.23 8.03716 43.2991 9.27635L43.3048 9.2822ZM50.8464 10.0947V7.90857H47.4137V20.0432H50.8464V14.198C50.8464 12.1464 52.3604 10.8136 54.8165 11.0416V7.76828C53.0308 7.79166 51.6728 8.60415 50.8464 10.0947ZM64.8776 7.90857V12.6257C64.8776 14.5897 63.849 15.8288 62.1326 15.8522C60.659 15.8522 59.7691 14.9053 59.7691 13.368V7.90857H56.3364V14.3851C56.3364 17.2258 58.0065 19.0554 60.6879 19.0554C62.6296 19.032 64.0339 18.2897 64.8834 16.8868V18.7164C64.8834 20.5635 63.6352 21.7384 61.6934 21.7384C60.399 21.715 58.7924 21.1714 57.654 20.4056L56.8045 22.8665C58.1221 23.8602 60.2834 24.5382 62.0691 24.5558C65.7965 24.5791 68.293 22.2294 68.293 18.7807V7.90857H64.8776ZM78.776 7.79751C77.1463 7.79751 75.8345 8.47556 74.985 9.69136V7.90857H71.5523V24.4213H74.985V18.2838C75.8576 19.4996 77.1694 20.1777 78.8453 20.1777C82.2145 20.1777 84.422 17.7168 84.422 14.0402C84.422 10.2934 82.1451 7.79166 78.7818 7.79166L78.776 7.79751ZM77.9727 17.296C76.2101 17.296 74.985 15.9399 74.985 13.935C74.985 11.971 76.2101 10.5974 77.9727 10.5974C79.7353 10.5974 80.9373 11.9944 80.9373 13.935C80.9373 15.9224 79.7353 17.296 77.9727 17.296ZM92.605 16.8225C92.004 17.1148 91.4434 17.2726 91.0447 17.2726C90.2876 17.296 89.8427 16.7524 89.8427 15.6009V10.8604H93.1193V8.44633H89.8427V5.10871H86.4273V16.1854C86.4273 18.7807 88.057 20.2011 90.2645 20.2011C91.3105 20.2011 92.4258 19.8854 93.3216 19.3652L92.6108 16.8167L92.605 16.8225ZM100.724 7.79751C96.8641 7.79751 94.2809 10.2583 94.2809 13.9818C94.2809 17.6818 96.8699 20.1835 100.724 20.1835C104.562 20.1835 107.151 17.6818 107.151 13.9818C107.151 10.2583 104.562 7.79751 100.724 7.79751ZM100.724 10.685C102.487 10.685 103.712 12.0411 103.712 14.0227C103.712 16.01 102.487 17.3603 100.724 17.3603C98.9387 17.3603 97.7367 16.0042 97.7367 14.0227C97.7367 12.0353 98.9387 10.685 100.724 10.685ZM110.381 16.6647C109.399 16.6647 108.665 17.3837 108.665 18.4475C108.665 19.4879 109.399 20.2537 110.381 20.2537C111.387 20.2537 112.097 19.4879 112.097 18.4475C112.097 17.3895 111.387 16.6647 110.381 16.6647ZM121.355 4.25531H114.733V20.0491H118.258V15.5366H121.355C125.325 15.5366 127.602 13.4148 127.602 9.73812C127.602 6.24268 125.325 4.25531 121.355 4.25531ZM121.176 12.5555H118.252V7.20714H121.176C123.141 7.20714 124.256 8.08977 124.256 9.84918C124.256 11.6554 123.141 12.5555 121.176 12.5555ZM133.219 10.0947V7.90857H129.787V20.0432H133.219V14.198C133.219 12.1464 134.733 10.8136 137.19 11.0416V7.76828C135.404 7.79166 134.046 8.60415 133.219 10.0947ZM140.778 2.49005C139.686 2.49005 138.929 3.30254 138.929 4.43066C138.929 5.55879 139.686 6.37128 140.778 6.37128C141.87 6.37128 142.628 5.55879 142.628 4.43066C142.628 3.30254 141.87 2.49005 140.778 2.49005ZM139.062 7.90272V20.0374H142.495V7.90272H139.062ZM153.804 12.0294L156.121 10.3402C155.052 8.71521 153.22 7.79166 150.926 7.79166C147.245 7.79166 144.771 10.2934 144.771 14.0168C144.771 17.6935 147.245 20.1777 150.88 20.1777C153.336 20.1777 155.208 19.184 156.208 17.4947L153.844 15.8698C153.243 16.8167 152.284 17.2901 151.059 17.2901C149.389 17.2901 148.204 15.9574 148.204 13.9934C148.204 12.0528 149.389 10.7435 151.059 10.7435C152.244 10.7201 153.157 11.217 153.804 12.0294Z"
                         />
                  <path
               d="M163.547 17.4713C162.23 17.4713 161.207 16.7699 160.692 15.6009L168.991 13.3914C168.858 9.91931 166.558 7.77411 163.079 7.79749C159.311 7.82087 156.925 10.346 156.925 13.9993C156.925 17.6993 159.49 20.1835 163.305 20.1835C165.489 20.1835 167.321 19.3476 168.702 17.6993L166.737 15.8931C165.824 16.9336 164.709 17.4713 163.547 17.4713ZM163.258 10.3635C164.42 10.3635 165.241 10.9071 165.622 12.0762L160.357 13.52C160.467 11.4683 161.559 10.3635 163.258 10.3635Z"
              fill="#22AB77" />
        <path fill-rule="evenodd" clip-rule="evenodd"
        d="M12.3646 0C18.6347 0 23.8127 4.72294 24.6102 10.837H21.2815C20.5071 6.56418 16.8086 3.32593 12.3588 3.32593C7.34847 3.32593 3.29165 7.43512 3.29165 12.4971C3.29165 15.3437 4.5688 17.8805 6.57987 19.5639V14.1571H10.4864C10.943 14.6832 11.6133 15.0164 12.3588 15.0164C13.7342 15.0164 14.8495 13.8882 14.8495 12.4971C14.8495 11.1059 13.7342 9.97779 12.3588 9.97779C11.6133 9.97779 10.943 10.311 10.4864 10.837H6.81681C7.52184 8.41712 9.73517 6.65186 12.3588 6.65186C15.5488 6.65186 18.1378 9.27052 18.1378 12.4971C18.1378 15.7236 15.5488 18.3423 12.3588 18.3423C11.4631 18.3423 10.6194 18.1377 9.86231 17.7695V21.3175C10.654 21.5455 11.492 21.6682 12.3588 21.6682C16.8086 21.6682 20.5071 18.43 21.2815 14.1571H24.6102C23.8069 20.2771 18.629 24.9942 12.3646 24.9942C5.53966 24.9942 0.00921631 19.4003 0.00921631 12.4971C0.00921631 5.59387 5.53966 0 12.3646 0Z"
        fill="#22AB77" />
    </svg>
       </div>

      {/* {isAuth && (
        <ul className='flex gap-8'>
          <li>
            <NavLink
              to={'/'}
              href='/'
              className='text-xs text-gray-400 hover:text-darkgrey'
              style={({ isActive }) => (isActive ? activeStyles : undefined)}>
              Главная
            </NavLink>
          </li>
          <li>
            <NavLink
              to={'/posts'}
              href='/'
              className='text-xs text-gray-400 hover:text-darkgrey'
              style={({ isActive }) => (isActive ? activeStyles : undefined)}>
              Мои посты
            </NavLink>
          </li>
          <li>
            <NavLink
              to={'/crypto'}
              href='/'
              className='text-xs text-gray-400 hover:text-darkgrey'
              style={({ isActive }) => (isActive ? activeStyles : undefined)}>
              Крипта
            </NavLink>
          </li>
          <li>
            <NavLink
              to={'/new'}
              href='/'
              className='text-xs text-gray-400 hover:text-darkgrey'
              style={({ isActive }) => (isActive ? activeStyles : undefined)}>
              Добавить пост
            </NavLink>
          </li>
        </ul>
      )} */}

      <div className='flex justify-center items-center bg-gray-600 text-xs text-white rounded-sm px-4 py-2'>
        {isAuth ? (
          <button onClick={logoutHandler}>Выйти</button>
        ) : (
          <Link to={'/login'}> Войти </Link>
        )}
      </div>

          <div onClick={toggleHTML}>
            {toggleTheme ? <svg  width="104" height="24" viewBox="0 0 104 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="28.5" y="0.5" width="52" height="23" rx="11.5" fill="black" stroke="#9E9E9E" />
                    <path
                        d="M80 12C80 18.0751 74.8513 23 68.5 23C62.1487 23 57 18.0751 57 12C57 5.92487 62.1487 1 68.5 1C74.8513 1 80 5.92487 80 12Z"
                        fill="#D9D9D9" />
                    <path
                        d="M95.4608 21.0003C92.9267 21.0003 90.549 20.0181 88.7655 18.2347C86.9821 16.4514 86 14.0735 86 11.5394C85.9996 9.79119 86.4837 8.07711 87.3984 6.58737C88.3132 5.09763 89.6228 3.8905 91.1821 3.09998C91.3425 3.0182 91.5234 2.98549 91.7023 3.00592C91.8812 3.02635 92.0501 3.09902 92.1879 3.21486C92.3258 3.33069 92.4265 3.48456 92.4774 3.65726C92.5283 3.82996 92.5273 4.01384 92.4743 4.18594C92.0294 5.62307 91.9857 7.15447 92.3479 8.61465C92.7101 10.0748 93.4644 11.4083 94.5294 12.4709C95.2937 13.2408 96.2031 13.8515 97.205 14.2676C98.2069 14.6837 99.2813 14.897 100.366 14.8951C101.196 14.8957 102.021 14.7712 102.814 14.5258C102.986 14.4729 103.17 14.4718 103.343 14.5227C103.516 14.5736 103.67 14.6743 103.785 14.8122C103.901 14.95 103.974 15.1189 103.994 15.2979C104.015 15.4768 103.982 15.6577 103.9 15.8181C103.11 17.3774 101.903 18.687 100.413 19.6018C98.9231 20.5166 97.209 21.0006 95.4608 21.0003ZM91.1493 4.49146C89.9402 5.22712 88.9414 6.26236 88.2496 7.49704C87.5577 8.73172 87.1962 10.1241 87.2 11.5394C87.2 16.0944 90.9058 19.8002 95.4608 19.8002C96.8761 19.804 98.2685 19.4425 99.5031 18.7507C100.738 18.0588 101.773 17.0601 102.509 15.851C101.806 16.0136 101.087 16.0955 100.366 16.0952C99.1238 16.0976 97.8931 15.8535 96.7456 15.377C95.5981 14.9006 94.5564 14.2012 93.681 13.3195C92.5437 12.1844 91.7144 10.7782 91.2715 9.23358C90.8285 7.68901 90.7865 6.05703 91.1493 4.49169V4.49146Z"
                        fill="#9E9E9E" />
                    <path
                        d="M11.0001 5.03333C7.15868 5.03333 4.03345 8.15856 4.03345 12C4.03345 15.8414 7.15868 18.9667 11.0001 18.9667C14.8415 18.9667 17.9668 15.8414 17.9668 12C17.9668 8.15856 14.8415 5.03333 11.0001 5.03333ZM11.0001 17.5C9.91232 17.5 8.84895 17.1774 7.94448 16.5731C7.04001 15.9687 6.33506 15.1097 5.91878 14.1047C5.50249 13.0998 5.39358 11.9939 5.6058 10.927C5.81801 9.8601 6.34184 8.88009 7.11103 8.1109C7.88022 7.34172 8.86022 6.81789 9.92712 6.60567C10.994 6.39345 12.0999 6.50237 13.1049 6.91865C14.1099 7.33494 14.9688 8.03989 15.5732 8.94436C16.1775 9.84883 16.5001 10.9122 16.5001 12C16.4985 13.4582 15.9185 14.8562 14.8874 15.8873C13.8563 16.9183 12.4583 17.4983 11.0001 17.5Z"
                        fill="#9E9E9E" />
                    <path d="M11.7333 1H10.2666V3.2H11.7333V1Z" fill="#9E9E9E" />
                    <path d="M11.7333 20.8H10.2666V23H11.7333V20.8Z" fill="#9E9E9E" />
                    <path d="M22 11.2667H19.8V12.7334H22V11.2667Z" fill="#9E9E9E" />
                    <path d="M2.2 11.2667H0V12.7334H2.2V11.2667Z" fill="#9E9E9E" />
                    <path d="M18.1186 18.0815L17.0815 19.1186L18.5482 20.5852L19.5853 19.5481L18.1186 18.0815Z"
                        fill="#9E9E9E" />
                    <path d="M3.45192 3.41478L2.41479 4.4519L3.88147 5.91858L4.91859 4.88145L3.45192 3.41478Z"
                        fill="#9E9E9E" />
                    <path d="M3.88144 18.0815L2.41479 19.5482L3.4519 20.5853L4.91855 19.1186L3.88144 18.0815Z"
                        fill="#9E9E9E" />
                    <path d="M18.5482 3.41474L17.0815 4.88141L18.1187 5.91853L19.5853 4.45186L18.5482 3.41474Z"
                        fill="#9E9E9E" />
       </svg>
 : (<svg width="104" height="24" viewBox="0 0 104 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <rect x="28.5" y="0.5" width="52" height="23" rx="11.5" fill="#EBEBED" stroke="#9E9E9E"/>
 <path d="M52 12C52 18.0751 46.8513 23 40.5 23C34.1487 23 29 18.0751 29 12C29 5.92487 34.1487 1 40.5 1C46.8513 1 52 5.92487 52 12Z" fill="#9E9E9E"/>
 <path d="M95.4608 21.0003C92.9267 21.0003 90.549 20.0181 88.7655 18.2347C86.9821 16.4514 86 14.0735 86 11.5394C85.9996 9.79119 86.4837 8.07711 87.3984 6.58737C88.3132 5.09763 89.6228 3.8905 91.1821 3.09998C91.3425 3.0182 91.5234 2.98549 91.7023 3.00592C91.8812 3.02635 92.0501 3.09902 92.1879 3.21486C92.3258 3.33069 92.4265 3.48456 92.4774 3.65726C92.5283 3.82996 92.5273 4.01384 92.4743 4.18594C92.0294 5.62307 91.9857 7.15447 92.3479 8.61465C92.7101 10.0748 93.4644 11.4083 94.5294 12.4709C95.2937 13.2408 96.2031 13.8515 97.205 14.2676C98.2069 14.6837 99.2813 14.897 100.366 14.8951C101.196 14.8957 102.021 14.7712 102.814 14.5258C102.986 14.4729 103.17 14.4718 103.343 14.5227C103.516 14.5736 103.67 14.6743 103.785 14.8122C103.901 14.95 103.974 15.1189 103.994 15.2979C104.015 15.4768 103.982 15.6577 103.9 15.8181C103.11 17.3774 101.903 18.687 100.413 19.6018C98.9231 20.5166 97.209 21.0006 95.4608 21.0003ZM91.1493 4.49146C89.9402 5.22712 88.9414 6.26236 88.2496 7.49704C87.5577 8.73172 87.1962 10.1241 87.2 11.5394C87.2 16.0944 90.9058 19.8002 95.4608 19.8002C96.8761 19.804 98.2685 19.4425 99.5031 18.7507C100.738 18.0588 101.773 17.0601 102.509 15.851C101.806 16.0136 101.087 16.0955 100.366 16.0952C99.1238 16.0976 97.8931 15.8535 96.7456 15.377C95.5981 14.9006 94.5564 14.2012 93.681 13.3195C92.5437 12.1844 91.7144 10.7782 91.2715 9.23358C90.8285 7.68901 90.7865 6.05703 91.1493 4.49169V4.49146Z" fill="#9E9E9E"/>
 <path d="M10.9999 5.03333C7.15844 5.03333 4.0332 8.15856 4.0332 12C4.0332 15.8414 7.15844 18.9667 10.9999 18.9667C14.8413 18.9667 17.9665 15.8414 17.9665 12C17.9665 8.15856 14.8413 5.03333 10.9999 5.03333ZM10.9999 17.5C9.91207 17.5 8.8487 17.1774 7.94423 16.5731C7.03976 15.9687 6.33481 15.1097 5.91853 14.1047C5.50225 13.0998 5.39333 11.9939 5.60555 10.927C5.81777 9.8601 6.34159 8.88009 7.11078 8.1109C7.87997 7.34172 8.85998 6.81789 9.92687 6.60567C10.9938 6.39345 12.0996 6.50237 13.1046 6.91865C14.1096 7.33494 14.9686 8.03989 15.573 8.94436C16.1773 9.84883 16.4999 10.9122 16.4999 12C16.4982 13.4582 15.9182 14.8562 14.8871 15.8873C13.856 16.9183 12.4581 17.4983 10.9999 17.5Z" fill="#9E9E9E"/>
 <path d="M11.7333 1H10.2666V3.2H11.7333V1Z" fill="#9E9E9E"/>
 <path d="M11.7333 20.8H10.2666V23H11.7333V20.8Z" fill="#9E9E9E"/>
 <path d="M21.9998 11.2667H19.7998V12.7334H21.9998V11.2667Z" fill="#9E9E9E"/>
 <path d="M2.2 11.2667H0V12.7334H2.2V11.2667Z" fill="#9E9E9E"/>
 <path d="M18.1186 18.0815L17.0815 19.1186L18.5482 20.5852L19.5853 19.5481L18.1186 18.0815Z" fill="#9E9E9E"/>
 <path d="M3.45216 3.41478L2.41504 4.4519L3.88171 5.91858L4.91883 4.88145L3.45216 3.41478Z" fill="#9E9E9E"/>
 <path d="M3.88169 18.0815L2.41504 19.5482L3.45215 20.5853L4.91879 19.1186L3.88169 18.0815Z" fill="#9E9E9E"/>
 <path d="M18.5482 3.41474L17.0815 4.88141L18.1187 5.91853L19.5853 4.45186L18.5482 3.41474Z" fill="#9E9E9E"/>
 </svg>)}
          </div>



     <div>
        <img className='h-full w-full object-contain rounded-full' src={maskimg} alt="maskimg" />
      </div>     
    </div>
  );
};
